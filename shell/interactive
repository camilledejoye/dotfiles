# Aliases {{{

# Improved commands {{{

# Allow to use the user aliases with sudo
alias sudo='sudo '

if type exa >/dev/null 2>&1; then
    alias ls='exa'
    alias l='ls'
    alias ll='exa -lH'
    alias la='ll -a'
    alias lt='ll --sort newest'
else
    alias ls='ls --color=auto'
    alias l='ls -C'
    alias ll='ls -lh'
    alias la='ll -A'
    alias lt='ll -tr'
fi

alias rm='rm -i'
alias rm!='\rm'
alias cp='cp -i'
alias cp!='\cp'
alias mv='mv -i'
alias mv!='\mv'

alias tree='tree -C'

alias most_used_commands="history | awk '{a[\$2]++}END{for(i in a){print a[i] \"s \" i}}' | sort -rn | head -20"

# }}}

# Shortcuts {{{

alias v='nvim'

alias m='make'

alias bm='base16-manager'

# }}}

# PHP {{{

alias php-xedbug='XDEBUG_CONFIG="idekey=xdebug" php'
# Commented because I work with containers most of the time and I create dedicated `sf`
# scripts to run `bin/console` inside the container.
# This alias was preventing me to using the script without first removing it with `unalias
# sf`
# alias sf='bin/console'

# }}}

# Docker {{{

alias dc='docker-compose'
alias dcd='dc down'
alias dce='dc exec'
alias dcr='dc run'
alias dcu='dc up -d'
alias dk='docker'
alias dm='docker-machine'
alias dmleave='eval $(docker-machine env -u)'

# }}}

# Git {{{

alias g='git'
alias gb='git branch'
alias gf='git fetch'
alias gfa='git fetch --all'
alias ga='git add'
alias gap='git add -p'
alias gc='git commit'
alias gck='git ck'
alias gtb='git checkout -t -b'
alias gcp='git cherry-pick'
alias gcpa='git cherry-pick --abort'
alias gcpc='git cherry-pick --continue'
alias gcps='git cherry-pick --skip'
alias gd='git df'
alias gds='git dfs'
alias gdt='git difftool -w --no-prompt'
alias gdts='git difftool -w --staged --no-prompt'
alias gl="git l"
alias gld="git lg develop.."
alias gla="git la"
alias gls='git ls-files'
alias gmt='git mt --no-prompt'
alias gp='git pull'
alias gpr='git pr'
alias gr='git rebase'
alias gra='git rebase --abort'
alias grc='git rebase --continue'
alias gri='git rebase -i'
alias grs='git rebase --skip'
alias gs='git st'
alias gsl='git stash list'
alias gsp='git stash pop'
alias gss='git stash push' # Alias for the old git stash save, so that gsp is git stash pop
alias gpu='git publish'

# }}}

# Composer {{{

alias c='composer'
alias cc='composer check'
alias composers='composer'
alias cs='composer cs'
alias csf='composer cs-fix'
alias ct='composer test'

# }}}

# }}}

# MANPAGER {{{

# Use bat
# export MANPAGER="sh -c 'col -xb | bat -l man -p'"

# Use vim
# export MANPAGER="/bin/sh -c \"col -b -x | \
# vim -R -c 'set ft=man nomod nolist nonu nornu' -c 'map q :q<CR>' \
# -c 'map <SPACE> <C-D>' -c 'map b <C-U>' \
# -c 'nmap K :Man <C-R>=expand(\\\"<cword>\\\")<CR><CR>' -\""

# Use nvim
export MANPAGER="nvim +Man!"

# }}}

# Tmux {{{

# Always work in a tmux session if tmux is installed
if command -v tmux >/dev/null 2>&1; then
    if [ -z ${TMUX+x} ]; then
        if tmux ls >/dev/null 2>&1; then
            tmux attach; exit
        else
            tmux new -s main; exit
        fi
    fi
fi

# }}}

# fzf {{{

# Load fzf colors
[ -f ~/.fzf.colors ] && source ~/.fzf.colors

# }}}

# vim: ft=sh fdm=marker
