#!/bin/sh

# Scale smaller montitor to a virtual resolution being the same as my 4K one
# Since X11 doesn't handle different DPI per monitor this allow to not have things shown too big
xrandr --output DP-0 --auto --output HDMI-0 --auto --scale 2x2 --right-of DP-0

# Run sxhkd only if not already running
pgrep -x sxhkd >/dev/null 2>&1 || sxhkd "/home/cdejoye/.config/bspwm/sxhkdrc" &

# XDG autostart
dex -a

pgrep -x pa-applet >/dev/null 2>&1 || pa-applet --disable-key-grabbing &

# Run the compositor for transparent window
# pgrep -x picom >/dev/null 2>&1 || picom -b

# Set the wallpaper
# For a random wallpager
# feh --no-fehbg --recursive --randomize --bg-scale ~/Pictures/Wallpapers
# For a fix wallpaper
feh --no-fehbg --recursive --bg-scale ~/Pictures/Wallpapers/arch/logo.png

# Start urxvt deamon
# Switched to alacrity
# pgrep -x urxvtd >/dev/null 2>&1 || urxvtd -q -f -o

# Start the notification deamon
pgrep -x dunst >/dev/null 2>&1 || dunst &

# Start xss-lock to handle the lock screen
pgrep -x xss-lock >/dev/null 2>&1 || xss-lock -q -- sflock -f '-misc-hack nerd font mono-bold-i-normal--0-0-0-0-m-0-iso8859-1' -b 'You shall not pass!' -h &

# Start the daemon to auto mount USB drives
pgrep -x udiskie >/dev/null 2>&1 || udiskie -s &

# Define the default cursor shape
# Needed to have to correct cursor icon on the desktops and try icons
xsetroot -cursor_name left_ptr

# Run custom script to start polybar (starts in background so no need to do it)
# Must be strated last, otherwise windows goes over it
$HOME/.config/polybar/launch.sh
