#!/bin/sh
# Source: https://github.com/LukeSmithxyz/voidrice

PID=$(xprop -id "$(xprop -root | awk '/_NET_ACTIVE_WINDOW\(WINDOW\)/{print $NF}')" | grep -m 1 PID | cut -d " " -f 3)
if [ "alacritty" = "$TERMINAL" ]; then
    PID=$(pstree -TlpA "$PID")
else
    PID=$(pstree -lpA "$PID")
fi
PID="$(echo "$PID" | tail -n 1 | awk -F'---' '{print $NF}' | sed -re 's/[^0-9]//g')"
cd "$(readlink /proc/"$PID"/cwd)" || return 1
"$TERMINAL"
